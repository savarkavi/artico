(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[605],{6127:function(e,s,l){Promise.resolve().then(l.t.bind(l,3222,23)),Promise.resolve().then(l.t.bind(l,6685,23)),Promise.resolve().then(l.bind(l,6461))},6461:function(e,s,l){"use strict";l.r(s);var t=l(7437),a=l(2749),n=l(6691),i=l.n(n),c=l(1396),r=l.n(c),o=l(2265),d=l(2333);let m=async e=>{let s=await fetch(e),l=await s.json();if(!s.ok)throw Error(l.message);return l};s.default=e=>{let{postSlug:s,commentsLength:l}=e,[n,c]=(0,o.useState)(""),{status:x}=(0,a.useSession)(),{data:h,mutate:u,isLoading:p}=(0,d.ZP)("http://localhost:3000/api/comments?postSlug=".concat(s),m),f=async()=>{await fetch("http://localhost:3000/api/comments",{method:"POST",body:JSON.stringify({desc:n,postSlug:s})}),u()};return(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{className:"mt-28 flex flex-col gap-8",children:[(0,t.jsx)("h4",{className:"text-3xl",children:"Comments"}),(0,t.jsxs)("div",{className:"flex gap-6",children:[(0,t.jsx)("textarea",{placeholder:"write a comment",className:"px-4 py-2 w-full outline-none text-black",onChange:e=>c(e.target.value)}),(0,t.jsx)("button",{className:"bg-blue-500 px-3 text-white w-24",onClick:f,children:"Post"})]})]}),"unauthenticated"===x&&(0,t.jsxs)("div",{className:"mt-20 text-xl",children:[(0,t.jsx)(r(),{href:"/",className:"text-blue-500",children:"Sign In"})," ",(0,t.jsx)("span",{children:"to post a comment"})]}),0===l?"":p?(0,t.jsx)("div",{className:"mt-12",children:"Loading..."}):null==h?void 0:h.map(e=>{var s,l;return(0,t.jsx)("div",{className:"mt-20 flex flex-col gap-20 border-b py-4",children:(0,t.jsxs)("div",{className:"flex flex-col gap-6",children:[(0,t.jsxs)("div",{className:"flex gap-2 items-center",children:[(0,t.jsx)("div",{className:"relative w-10 h-10 rounded-full",children:(0,t.jsx)(i(),{src:null==e?void 0:null===(s=e.user)||void 0===s?void 0:s.image,alt:"pp",fill:!0,className:"rounded-full"})}),(0,t.jsxs)("div",{className:"flex flex-col gap-1 text-gray-400",children:[(0,t.jsx)("span",{className:"text-sm",children:null==e?void 0:null===(l=e.user)||void 0===l?void 0:l.name}),(0,t.jsx)("span",{className:"text-sm",children:null==e?void 0:e.createdAt.substring(0,10)})]})]}),(0,t.jsx)("p",{className:"text-sm",children:null==e?void 0:e.desc})]})},e.id)})]})}}},function(e){e.O(0,[435,749,144,591,971,596,744],function(){return e(e.s=6127)}),_N_E=e.O()}]);